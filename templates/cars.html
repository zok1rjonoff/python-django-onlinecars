{% load static %}
<!doctype html>
<html class="no-js" lang="en">

    <head>
        <!-- meta data -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <!--font-family-->
		<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

		<link href="https://fonts.googleapis.com/css?family=Rufina:400,700" rel="stylesheet">
        
        <!-- title of site -->
        <title>CarVilla</title>

        <!-- For favicon png -->
		<link rel="shortcut icon" type="image/icon" href="{% static 'logo/favicon.png' %}"/>
       
        <!--font-awesome.min.css-->
        <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">

        <!--linear icon css-->
		<link rel="stylesheet" href="{% static 'css/linearicons.css' %}">

        <!--flaticon.css-->
		<link rel="stylesheet" href="{% static 'css/flaticon.css' %}">

		<!--animate.css-->
        <link rel="stylesheet" href="{% static 'css/animate.css' %}">

        <!--owl.carousel.css-->
        <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
		<link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
		
        <!--bootstrap.min.css-->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
		
		<!-- bootsnav -->
		<link rel="stylesheet" href="{% static 'css/bootsnav.css' %}" >
        
        <!--style.css-->
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        
        <!--responsive.css-->
        <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
        
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		
        <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>
	
	<body>
		<!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->
	
		<!--welcome-hero start -->
		<section id="home" class="welcome-hero">

			<!-- top-area Start -->
			<div class="top-area">
				<div class="header-area">
					<!-- Start Navigation -->
				    <nav class="navbar navbar-default bootsnav  navbar-sticky navbar-scrollspy"  data-minus-value-desktop="70" data-minus-value-mobile="55" data-speed="1000">

				        <div class="container">

				            <!-- Start Header Navigation -->
				            <div class="navbar-header">
				                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
				                    <i class="fa fa-bars"></i>
				                </button>
				                <a class="navbar-brand" style="font-size:50px;" href="cars.html">سيارتي</span></a>

				            </div><!--/.navbar-header-->
				            <!-- End Header Navigation -->

				            <!-- Collect the nav links, forms, and other content for toggling -->
				            <div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
				                <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
				                    <li class="scroll active"><a href="#home">home</a></li>
				                    <li class="scroll"><a href="#featured-cars">featured cars</a></li>
				                    <li class="scroll"><a href="#new-cars">new cars</a></li>
				                    <li class="scroll"><a href="#brand">brands</a></li>
				                    <li><a href="/add-car">Add car</a></li>
				                    <li><a href="{% url 'add-comment' %}">Add comment</a></li>
									{% if user.is_authenticated %}
										<li><a style="font-family:New Century Schoolbook, TeX Gyre Schola, serif" href="/logout">Logout {{ user.username }}</a></li>
        							{% else %}
										<li><a style="font-family:New Century Schoolbook, TeX Gyre Schola, serif" href="/login">login</a></li>
        							{% endif %}
				                </ul><!--/.nav -->
				            </div><!-- /.navbar-collapse -->
				        </div><!--/.container-->
				    </nav><!--/nav-->
				    <!-- End Navigation -->
				</div><!--/.header-area-->
			    <div class="clearfix"></div>

			</div><!-- /.top-area-->
			<!-- top-area End -->

			<div class="container">
				<div class="welcome-hero-txt">
					<h2>get your desired car in resonable price</h2>
					<p>
						Rev up your dreams without burning through your savings! Get behind the wheel of
						your dream car at a price that won't break the bank. With unbeatable deals and a lineup
						that'll make any car lover swoon, why wait? Let's hit the road in style!
					</p>
				</div>
			</div>

			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="model-search-content">
							<div class="row">
								<div class="col-md-offset-1 col-md-2 col-sm-12">
									<div class="single-model-search">
										<h2>Search</h2>
										<form method="get" action="{% url 'search' %}">
											<div style="display:flex;gap:50px;">
												<div>
													<input class="form-control form-control-lg" style="width:700px;" type="text" name="car_name" placeholder="Enter the name of the car ">
												</div>
												<div>
													<button class="btn btn-primary" type="submit">Search</button>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section><!--/.welcome-hero-->
		<!--welcome-hero end -->

		<!--new-cars start -->
		<section id="new-cars" class="new-cars" style="margin-top:150px;">
			<div class="container">
				<div class="section-header">
					<p>checkout <span>the</span> latest cars</p>
					<h2>newest cars</h2>
				</div><!--/.section-header-->
				<div class="new-cars-content">
					<div class="owl-carousel owl-theme" id="new-cars-carousel">
						{% for i in cars %}
						<div class="new-cars-item">
							<div class="single-new-cars-item">
								<div class="row">
									<div class="col-md-7 col-sm-12">
										<div style="height:450px;" class="new-cars-img">
											<img style="height:450px;" src="{{i.car_image.url}}"/>
										</div><!--/.new-cars-img-->
									</div>
									<div class="col-md-5 col-sm-12">
										<div class="new-cars-txt">
											<h2><a href="#">{{i.car_name}}</a></h2>
											<p class="car_description">
												{{ i.car_description }}
											</p>
											<button class="welcome-btn animated fadeInDown" onclick="window.location.href='/car-details/{{i.pk}}'" style="opacity: 0;width:120px;height:50px;">More Details</button>
										</div><!--/.new-cars-txt-->
									</div><!--/.col-->
								</div>
							</div><!--/.single-new-cars-item-->
						</div>
						{% endfor %}<!--/.new-cars-item-->
					</div><!--/#new-cars-carousel-->
				</div>
				<script>
    document.addEventListener("DOMContentLoaded", function() {
        var descriptionElements = document.querySelectorAll('.car_description');
        var maxLength = 85;
        descriptionElements.forEach(function(descriptionElement) {
            if (descriptionElement.textContent.length > maxLength) {
                descriptionElement.textContent = descriptionElement.textContent.substring(0, maxLength) + '...';
            }
        });
    });
</script><!--/.new-cars-content-->
			</div><!--/.container-->
		</section><!--/.new-cars-->
		<!--new-cars end -->

		<!--featured-cars start -->
		<section style="margin-top:-180px;" id="featured-cars" class="featured-cars">
			<div class="container">
				<div class="section-header">
					<p>checkout <span>the</span> featured cars</p>
					<h2>featured cars</h2>
				</div><!--/.section-header-->
				<div class="featured-cars-content">
					<div class="row">
						{% for i in cars %}
						<div class="col-lg-3 col-md-4 col-sm-6">
							<div class="single-featured-cars">
								<div class="featured-img-box">
									<div class="featured-cars-img" style="width:260px;height:140px;">
										<img style="width:250px;height:140px;" src="{{ i.car_image.url }}" alt="cars">
									</div>
								</div>
								<div class="featured-cars-txt">
									<style>
										.car-link {
    										text-decoration: none;
   											color:blue;
    										transition: text-decoration 0.3s ease;
										}

										.car-link:hover {
    										text-decoration: underline;
    										font-size:18px;
    										color: blue;
										}
									</style>

            						<h2><a href="/car-details/{{i.pk}}" class="car-link">{{i.car_name}}</a></h2>
									<div style="display:flex; justify-content:space-between;">
										<h3 class="carPrice">${{ i.car_price }}</h3>
    									<h3 class="convertedPrice"></h3>
									</div>
									<p class="description">
										{{i.car_description}}
									</p>
								</div>
							</div>
						</div>
						{% endfor %}
						<script>
    document.addEventListener("DOMContentLoaded", function() {
        var descriptionElements = document.querySelectorAll('.description');
        var maxLength = 85;
        descriptionElements.forEach(function(descriptionElement) {
            if (descriptionElement.textContent.length > maxLength) {
                descriptionElement.textContent = descriptionElement.textContent.substring(0, maxLength) + '...';
            }
        });
    });
</script>
						<script>
							document.addEventListener("DOMContentLoaded", function() {
    							var carPriceElements = document.querySelectorAll('.carPrice');
    							fetch('https://cbu.uz/ru/arkhiv-kursov-valyut/json/USD/')
    							.then(response => response.json())
    							.then(data => {
        						var usdToUzsRate = data[0].Rate;

						        carPriceElements.forEach(function(element) {
					            var carPriceUSD = parseFloat(element.innerText.replace(/[^0-9.]/g, ''));

            					var convertedPriceElement = element.nextElementSibling;

					            var carPriceUZS = carPriceUSD * usdToUzsRate;
            					convertedPriceElement.innerText += carPriceUZS.toFixed(2) + " UZS";
        					});
    						})
    						.catch(error => {
        						console.error('Error fetching conversion rates:', error);
    						});
						});
						</script>
					</div>
				</div>
			</div><!--/.container-->
		</section><!--/.featured-cars-->
		<!--featured-cars end -->

		<!-- clients-say strat -->
		<section id="clients-say"  class="clients-say">
			<div class="container">
				<div class="section-header">
					<h2>what our clients say</h2>
				</div><!--/.section-header-->
				<div class="row">
					<div class="owl-carousel testimonial-carousel">
						{% for i in comments %}
						<div class="col-sm-3 col-xs-12">
							<div class="single-testimonial-box">
								<div class="testimonial-description">
									<div class="testimonial-info">
										<div class="testimonial-img">
											<img src="/media/website_images/unnamed.jpg" alt="image of clients person" />
										</div><!--/.testimonial-img-->
									</div><!--/.testimonial-info-->
									<div class="testimonial-comment">
										<p>
											{{i.user_comment}}
										</p>
									</div><!--/.testimonial-comment-->
									<div class="testimonial-person">
										<h2><a href="#">{{i.user}}</a></h2>
										<h4>From: {{i.user_living_place}}</h4>
									</div><!--/.testimonial-person-->
								</div><!--/.testimonial-description-->
							</div><!--/.single-testimonial-box-->
						</div>
						{%endfor%}
					</div><!--/.testimonial-carousel-->
				</div><!--/.row-->
			</div><!--/.container-->

		</section><!--/.clients-say-->	
		<!-- clients-say end -->

		<!--brand strat -->
		<section id="brand"  class="brand">
			<div class="container">
				<div class="brand-area">
					<div class="owl-carousel owl-theme brand-item" style="autoplayTimeout: 100;">
						{% for i in brands %}
						<div class="item">
							<img src="{{ i.manufacturer_image.url }}" alt="brand-image" />
						</div>
						{%endfor%}<!--/.item-->
					</div><!--/.owl-carousel-->
				</div><!--/.clients-area-->

			</div><!--/.container-->

		</section><!--/brand-->	
		<!--brand end -->

		<!--blog start -->
		<section id="blog" class="blog"></section><!--/.blog-->
		<!--blog end -->

		<!--contact start-->
		<footer id="contact"  class="contact">
			<div class="container">
				<div class="footer-top">
					<div class="row">
<!--						ALL BRANDS -->
						<div class="col-md-3 col-xs-12">
							<div class="single-footer-widget">
								<h2>All brands</h2>
								{% for i in brands %}
								<div class="row">
									<div class="col-md-7 col-xs-6">
										<ul>
											<li><a href="/brands/{{i.pk}}">{{i.manufacturer_name}}</a></li>
										</ul>
									</div>
								</div>
								{%endfor%}
							</div>
						</div>
					</div>
				</div>
				<div class="footer-copyright">
					<div class="row">
						<div class="col-sm-6">
							<p>
								&copy; Everything is okey don't worry
							</p><!--/p-->
						</div>
						<div class="col-sm-6">
							<div class="footer-social">
								<a href="#"><i class="fa fa-instagram"></i></a>
								<a href="#"><i class="fa fa-github"></i></a>
								<a href="#"><i class="fa fa-telegram"></i></a>
							</div>
						</div>
					</div>
				</div><!--/.footer-copyright-->
			</div><!--/.container-->
        </footer><!--/.contact-->
		<!--contact end-->


		
		<!-- Include all js compiled plugins (below), or include individual files as needed -->

		<script src="{% static 'js/jquery.js' %}"></script>
        
        <!--modernizr.min.js-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
		
		<!--bootstrap.min.js-->
        <script src="{% static 'js/bootstrap' %}.min.js"></script>
		
		<!-- bootsnav js -->
		<script src="{% static 'js/bootsnav.' %}js"></script>

		<!--owl.carousel.js-->
        <script src="{% static 'js/owl.carou' %}sel.min.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>

        <!--Custom JS-->
        <script src="{% static 'js/custom.js' %}"></script>

    </body>
	
</html>